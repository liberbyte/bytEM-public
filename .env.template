# BytEM Configuration - Hybrid Instance (Supply + Demand + Exchange)
# Instance Configuration
NODE_ENV=production
CONFIG_TYPE=bytem1
BYTEM_INSTANCE=bytem1
BYTEM_TYPE=hybrid

# Domain Configuration for Frontend (Dynamic)
BYTEM_DOMAIN=${BYTEM_DOMAIN}
MATRIX_DOMAIN=${MATRIX_DOMAIN}

# Matrix Configuration
MATRIX_SERVER=http://bytem-synapse:8008
MATRIX_SERVER_NAME=${MATRIX_DOMAIN}
MATRIX_FEDERATION_PORT=8448
BOT_USER_ID=@${BOT_USER}:${MATRIX_DOMAIN}
BOT_USERNAME=${BOT_USER}
BOT_PASSWORD=${BOT_PASSWORD}
BOT_USER_ACCESS_TOKEN=${BOT_USER_ACCESS_TOKEN}
BOT_USER_AUTO_JOIN_ROOM=true
PANTALAIMON_USE=false
PANTALAIMON_USERNAME=${BOT_USER}
PANTALAIMON_PASSWORD=${BOT_PASSWORD}

# Matrix SSO Configuration
MATRIX_SSO_ENABLED=true
MATRIX_SSO_CLIENT_ID=${MATRIX_SSO_CLIENT_ID}
MATRIX_SSO_CLIENT_SECRET=${MATRIX_SSO_CLIENT_SECRET}
MATRIX_SSO_CALLBACK_URL=https://${MATRIX_DOMAIN}/auth/matrix/callback

# Exchange Server Configuration
EXCHANGE_SERVER_HOSTNAME=${BYTEM_DOMAIN}
EXCHANGE_SERVER_PORT=3000
EXCHANGE_SERVER_PROTOCOL=https

# App Configuration
EXCH_SERVER=https://${BYTEM_DOMAIN}
NODE_MODE=demand-supply
API_HOST=https://${BYTEM_DOMAIN}
APP_SERVER=https://${BYTEM_DOMAIN}

# Matrix Admin Configuration
SYNAPSE_ADMIN_TOKEN=${BOT_USER_ACCESS_TOKEN}
MATRIX_ADMIN_USER=@${BOT_USER}:${MATRIX_DOMAIN}
MATRIX_ADMIN_USERNAME=${BOT_USER}
MATRIX_ADMIN_PASSWORD=${BOT_PASSWORD}

# Federation Configuration - Dynamic Discovery
FEDERATED_INSTANCES=
FEDERATION_MARKET_LIST_URL=${FEDERATION_MARKET_LIST_URL}
FEDERATION_UPDATE_INTERVAL=3600000

# RabbitMQ Configuration
RABBITMQ_URL=amqp://bytem-rabbitmq:5672/bytem
RABBITMQ_MGMT_PORT=15672
RABBITMQ_USERNAME=${RABBITMQ_USERNAME}
RABBITMQ_PASSWORD=${RABBITMQ_PASSWORD}
RABBITMQ_VIRTUAL_HOST=bytem

# Apache Solr Configuration
SOLR_URL=http://bytem-solr:8983
SOLR_CORE=bytem1_metadata
SOLR_METADATA_EXPOSURE_LEVEL=minimal

# SFTP Configuration for Solr file operations (Disabled for Docker)
SSH_HOST=bytem-solr
SSH_PORT=8983
SSH_USERNAME=solr
SSH_PASSWORD=solr_pass
SSH_PRIVATE_KEY=
SFTP_ENABLED=false
SFTP_REMOTE_PATH=/home/solr/bytem1
SFTP_TEMP_PATH=/home/solr/temp

# Exchange Configuration
EXCHANGE_ENABLED=true
EXCHANGE_DEFAULT_LOCATION=supply
EXCHANGE_ROOM_CLEANUP_TIMEOUT=3600000

# Bot Configuration - Full Hybrid
SUPPLY_BOT=true
DEMAND_BOT=true
EXCHANGE_BOT=true
DEV_DEMAND_SUPPLY_BOT=true

# Federation Settings
FEDERATION_ENABLED=true
FEDERATION_WHITELIST=${MATRIX_DOMAIN}

# External URLs
MARKET_LIST=${MARKET_LIST}
DOMAIN_LIST=https://bytem.app/domains/domain-list
SUB_TYPES=https://bytem.app/bytem/sub-types.json
DEMAND_TEMPLATE=https://bytem.app/schema/demand-template
SUBSCRIPTION_TEMPLATE=https://bytem.app/schema/subscription-template
DEMAND_STATE=https://bytem.app/schema/demand-state
SUPPLY_STATE=https://bytem.app/schema/supply-state
EXCHANGE_STATE=https://bytem.app/schema/exchange-state
LIBERBYTE_SCHEMA=https://bytem.app/schema/liberbyte-schema.json
LOG_TEMPLATE=https://bytem.app/schema/log-template

# Logging
LOG_LEVEL=info
LOG_FILE=/var/log/bytem1/bot.log

# Security
JWT_SECRET=bytem1_jwt_secret_key_very_secure_2024
SESSION_SECRET=bytem-matrix-session-secret-2025
SESSION_TIMEOUT=86400000

# Performance
MAX_CONCURRENT_EXCHANGES=10
RATE_LIMIT_PER_SECOND=500
RATE_LIMIT_BURST=5000

# Port Configuration
BOT_PORT=4000
EXCHANGE_PORT=3000
APP_PORT=8000
MATRIX_PORT=8008
RABBITMQ_PORT=5672
SOLR_PORT=8983
SFTP_PORT=2222

# Docker Compose Configs
DOMAIN_NAME=${DOMAIN}
RABBITMQ_DEFAULT_USER=${RABBITMQ_USERNAME}
RABBITMQ_DEFAULT_PASS=${RABBITMQ_PASSWORD}
RABBITMQ_DEFAULT_VHOST=bytem
POSTGRES_USER=synapse
POSTGRES_PASSWORD=${POSTGRES_PASSWORD}

# SSL Configs
SSL_ENABLED=true
SSL_CERT_PATH=certbot/conf/live/${BYTEM_DOMAIN}

# File Configs
MAX_FILE_SIZE=52428800
FILE_UPLOAD_PATH=files

# Message Event Configs
MESSAGE_EVENT_LIMIT=1000
